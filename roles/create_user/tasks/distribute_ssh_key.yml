- name: Create .ssh directory --> ["/home/{{ user }}/.ssh/"]
  file:
    path: /home/{{ user }}/.ssh/
    state: directory
- name: create empty file for authorized_keys --> ["/home/{{ user }}/.ssh/authorized_keys"]
  file:
    path: "/home/{{ user }}/.ssh/authorized_keys"
    state: touch

- name: Put authorized key (id_rsa.pub) taken from jumpserver 
  authorized_key:
    user: vio
    state: present
    #    name: putkey
    key: "{{ lookup('file', '/home/{{ user }}/.ssh/id_rsa.pub') }}"
  register: key

- name: Display the id_rsa.pub public key 
  debug:
    var: key["key"].split()[1]
 
    #- name: put pubkey
    # lineinfile:
    #    path: "/home/{{ user }}/.ssh/authorized_keys"
    #    line: "{{ key }}"

    #ansible localhost -m authorized_key -a "user=menek key='{{ lookup('file', '/root/.ssh/id_rsa.pub') }}' state=present" -u root -k
