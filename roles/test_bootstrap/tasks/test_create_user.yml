- name: Create user on a linux server
  hosts: all
  become: yes
  gather_facts: true
  vars:
    - user: vio
    - password: vio
  tasks:
      - name: create a login user for centos
        include_tasks: create_user_centos.yml
        when: ansible_facts['distribution'] == 'CentOS'

        #      - name: Create a login user
        #        ansible.builtin.user:
        #          name: "{{ user }}"
        #          password: "{{ password }}"
        #          groups:
        #            - wheel
        #          state: present

      - name: Create .ssh directory
        file:
          path: /home/{{ user }}/.ssh/
          state: directory
      - name: create empty file
        file:
          path: "/home/{{ user }}/.ssh/authorized_keys"
          state: touch
#      - name: put pubkey
#        lineinfile:
#          path: "/home/{{ user }}/.ssh/authorized_keys"
#          line: "{{ pubkey }}"
